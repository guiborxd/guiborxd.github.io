<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leitura da Bíblia | Farol da Fé</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Montserrat', sans-serif; }
        h1, h2, h3 { font-family: 'Lora', serif; }
        .versiculo-numero {
            font-weight: bold;
            color: #a16207; /* Cor âmbar escura */
            float: left;
            margin-right: 8px;
            font-size: 0.8em;
            line-height: 1.5;
        }
    </style>
</head>
<body class="bg-amber-50 text-stone-800">

    <!-- Cabeçalho e Navegação -->
    <header class="bg-stone-800 text-white shadow-lg">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold font-family-lora">Farol da Fé</a>
            <div class="space-x-4">
                <a href="index.html" class="hover:text-amber-300 transition-colors">Início</a>
                <a href="livros.html" class="hover:text-amber-300 transition-colors">Livros da Bíblia</a>
            </div>
        </nav>
    </header>

    <!-- Conteúdo Principal -->
    <main class="container mx-auto px-6 py-12">
        <div id="loading" class="text-center text-xl"><p>Carregando conteúdo...</p></div>

        <div id="conteudo-leitura" class="hidden">
            <h1 id="nome-livro" class="text-4xl font-bold text-center text-stone-800 mb-4"></h1>
            <h2 id="capitulo-selecionado" class="text-2xl text-center text-stone-600 mb-8"></h2>

            <!-- Seletor de Capítulos -->
            <div class="mb-8 text-center">
                <label for="seletor-capitulos" class="mr-2">Escolha um capítulo:</label>
                <select id="seletor-capitulos" class="p-2 rounded-md border-2 border-stone-300"></select>
            </div>

            <!-- Container dos Versículos -->
            <div id="versiculos-container" class="bg-white p-6 md:p-8 rounded-lg shadow-md text-lg leading-relaxed">
                <!-- Versículos serão inseridos aqui -->
            </div>
        </div>
    </main>

    <!-- Rodapé -->
    <footer class="bg-stone-800 text-white text-center p-6 mt-12">
        <p>&copy; 2025 Farol da Fé. Todos os direitos reservados.</p>
    </footer>

    <script>
        // Lista completa de livros com detalhes, embutida para evitar falhas de rede.
        const todosOsLivros = [
            {"abbrev":"gn","name":"Gênesis","chapters":50}, {"abbrev":"ex","name":"Êxodo","chapters":40},
            {"abbrev":"lv","name":"Levítico","chapters":27}, {"abbrev":"nm","name":"Números","chapters":36},
            {"abbrev":"dt","name":"Deuteronômio","chapters":34}, {"abbrev":"js","name":"Josué","chapters":24},
            {"abbrev":"jz","name":"Juízes","chapters":21}, {"abbrev":"rt","name":"Rute","chapters":4},
            {"abbrev":"1sm","name":"1º Samuel","chapters":31}, {"abbrev":"2sm","name":"2º Samuel","chapters":24},
            {"abbrev":"1rs","name":"1º Reis","chapters":22}, {"abbrev":"2rs","name":"2º Reis","chapters":25},
            {"abbrev":"1cr","name":"1º Crônicas","chapters":29}, {"abbrev":"2cr","name":"2º Crônicas","chapters":36},
            {"abbrev":"ed","name":"Esdras","chapters":10}, {"abbrev":"ne","name":"Neemias","chapters":13},
            {"abbrev":"et","name":"Ester","chapters":10}, {"abbrev":"job","name":"Jó","chapters":42},
            {"abbrev":"sl","name":"Salmos","chapters":150}, {"abbrev":"pv","name":"Provérbios","chapters":31},
            {"abbrev":"ec","name":"Eclesiastes","chapters":12}, {"abbrev":"ct","name":"Cânticos","chapters":8},
            {"abbrev":"is","name":"Isaías","chapters":66}, {"abbrev":"jr","name":"Jeremias","chapters":52},
            {"abbrev":"lm","name":"Lamentações","chapters":5}, {"abbrev":"ez","name":"Ezequiel","chapters":48},
            {"abbrev":"dn","name":"Daniel","chapters":12}, {"abbrev":"os","name":"Oséias","chapters":14},
            {"abbrev":"jl","name":"Joel","chapters":3}, {"abbrev":"am","name":"Amós","chapters":9},
            {"abbrev":"ob","name":"Obadias","chapters":1}, {"abbrev":"jn","name":"Jonas","chapters":4},
            {"abbrev":"mq","name":"Miquéias","chapters":7}, {"abbrev":"na","name":"Naum","chapters":3},
            {"abbrev":"hc","name":"Habacuque","chapters":3}, {"abbrev":"sf","name":"Sofonias","chapters":3},
            {"abbrev":"ag","name":"Ageu","chapters":2}, {"abbrev":"zc","name":"Zacarias","chapters":14},
            {"abbrev":"ml","name":"Malaquias","chapters":4}, {"abbrev":"mt","name":"Mateus","chapters":28},
            {"abbrev":"mc","name":"Marcos","chapters":16}, {"abbrev":"lc","name":"Lucas","chapters":24},
            {"abbrev":"jo","name":"João","chapters":21}, {"abbrev":"at","name":"Atos","chapters":28},
            {"abbrev":"rm","name":"Romanos","chapters":16}, {"abbrev":"1co","name":"1ª Coríntios","chapters":16},
            {"abbrev":"2co","name":"2ª Coríntios","chapters":13}, {"abbrev":"gl","name":"Gálatas","chapters":6},
            {"abbrev":"ef","name":"Efésios","chapters":6}, {"abbrev":"fp","name":"Filipenses","chapters":4},
            {"abbrev":"cl","name":"Colossenses","chapters":4}, {"abbrev":"1ts","name":"1ª Tessalonicenses","chapters":5},
            {"abbrev":"2ts","name":"2ª Tessalonicenses","chapters":3}, {"abbrev":"1tm","name":"1ª Timóteo","chapters":6},
            {"abbrev":"2tm","name":"2ª Timóteo","chapters":4}, {"abbrev":"tt","name":"Tito","chapters":3},
            {"abbrev":"fm","name":"Filemom","chapters":1}, {"abbrev":"hb","name":"Hebreus","chapters":13},
            {"abbrev":"tg","name":"Tiago","chapters":5}, {"abbrev":"1pe","name":"1ª Pedro","chapters":5},
            {"abbrev":"2pe","name":"2ª Pedro","chapters":3}, {"abbrev":"1jo","name":"1ª João","chapters":5},
            {"abbrev":"2jo","name":"2ª João","chapters":1}, {"abbrev":"3jo","name":"3ª João","chapters":1},
            {"abbrev":"jd","name":"Judas","chapters":1}, {"abbrev":"ap","name":"Apocalipse","chapters":22}
        ];
        
        // Dados locais para Gênesis 1, para garantir que funcione sem falhas.
        const dadosLocais = {
            "gn": {
                "1": [
                    {"number":1,"text":"No princípio Deus criou os céus e a terra."},
                    {"number":2,"text":"Era a terra sem forma e vazia; trevas cobriam a face do abismo, e o Espírito de Deus se movia sobre a face das águas."},
                    {"number":3,"text":"Disse Deus: \"Haja luz\", e houve luz."},
                    {"number":4,"text":"Deus viu que a luz era boa, e separou a luz das trevas."},
                    {"number":5,"text":"Deus chamou à luz dia, e às trevas chamou noite. Passaram-se a tarde e a manhã; esse foi o primeiro dia."},
                    {"number":6,"text":"Depois disse Deus: \"Haja entre as águas um firmamento que separe águas de águas\"."},
                    {"number":7,"text":"Então Deus fez o firmamento e separou as águas que estavam embaixo do firmamento das que estavam por cima. E assim foi."},
                    {"number":8,"text":"Ao firmamento Deus chamou céu. Passaram-se a tarde e a manhã; esse foi o segundo dia."},
                    {"number":9,"text":"E disse Deus: \"Ajuntem-se num só lugar as águas que estão debaixo do céu, e apareça a parte seca\". E assim foi."},
                    {"number":10,"text":"À parte seca Deus chamou terra, e chamou mares ao conjunto das águas. E Deus viu que ficou bom."},
                    {"number":11,"text":"Então disse Deus: \"Cubra-se a terra de vegetação: plantas que dêem sementes e árvores cujos frutos produzam sementes de acordo com as suas espécies\". E assim foi."},
                    {"number":12,"text":"A terra fez brotar a vegetação: plantas que dão sementes de acordo com as suas espécies, e árvores cujos frutos produzem sementes de acordo com as suas espécies. E Deus viu que ficou bom."},
                    {"number":13,"text":"Passaram-se a tarde e a manhã; esse foi o terceiro dia."},
                    {"number":14,"text":"Disse Deus: \"Haja luminares no firmamento do céu para separar o dia da noite. Sirvam eles de sinais para marcar estações, dias e anos,"},
                    {"number":15,"text":"e sirvam de luminares no firmamento do céu para iluminar a terra\". E assim foi."},
                    {"number":16,"text":"Deus fez os dois grandes luminares: o maior para governar o dia e o menor para governar a noite; fez também as estrelas."},
                    {"number":17,"text":"Deus os colocou no firmamento do céu para iluminar a terra,"},
                    {"number":18,"text":"governar o dia e a noite, e separar a luz das trevas. E Deus viu que ficou bom."},
                    {"number":19,"text":"Passaram-se a tarde e a manhã; esse foi o quarto dia."},
                    {"number":20,"text":"Disse também Deus: \"Encham-se as águas de seres vivos, e voem as aves sobre a terra, sob o firmamento do céu\"."},
                    {"number":21,"text":"Assim Deus criou os grandes animais aquáticos e os demais seres vivos que povoam as águas, de acordo com as suas espécies; e todas as aves, de acordo com as suas espécies. E Deus viu que ficou bom."},
                    {"number":22,"text":"Então Deus os abençoou, dizendo: \"Sejam férteis e multipliquem-se! Encham as águas dos mares! E multipliquem-se as aves na terra\"."},
                    {"number":23,"text":"Passaram-se a tarde e a manhã; esse foi o quinto dia."},
                    {"number":24,"text":"E disse Deus: \"Produza a terra seres vivos de acordo com as suas espécies: rebanhos domésticos, animais selvagens e os demais seres vivos da terra, cada um de acordo com a sua espécie\". E assim foi."},
                    {"number":25,"text":"Deus fez os animais selvagens de acordo com as suas espécies, os rebanhos domésticos de acordo com as suas espécies, e os demais seres vivos da terra de acordo com as suas espécies. E Deus viu que ficou bom."},
                    {"number":26,"text":"Então disse Deus: \"Façamos o homem à nossa imagem, conforme a nossa semelhança. Domine ele sobre os peixes do mar, sobre as aves do céu, sobre os grandes animais de toda a terra e sobre todos os pequenos animais que se movem rente ao chão\"."},
                    {"number":27,"text":"Criou Deus o homem à sua imagem, à imagem de Deus o criou; homem e mulher os criou."},
                    {"number":28,"text":"Deus os abençoou, e lhes disse: \"Sejam férteis e multipliquem-se! Encham e subjuguem a terra! Dominem sobre os peixes do mar, sobre as aves do céu e sobre todos os animais que se movem pela terra\"."},
                    {"number":29,"text":"Disse Deus: \"Eis que lhes dou todas as plantas que nascem em toda a terra e produzem sementes, e todas as árvores que dão frutos com sementes. Elas servirão de alimento para vocês."},
                    {"number":30,"text":"E dou todos os vegetais como alimento a tudo o que tem em si fôlego de vida: a todos os grandes animais da terra, a todas as aves do céu e a todas as criaturas que se movem rente ao chão\"."},
                    {"number":31,"text":"E Deus viu tudo o que havia feito, e tudo havia ficado muito bom. Passaram-se a tarde e a manhã; esse foi o sexto dia."}
                ]
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const abbrev = params.get('abbrev');

            const loadingEl = document.getElementById('loading');
            const conteudoEl = document.getElementById('conteudo-leitura');
            const nomeLivroEl = document.getElementById('nome-livro');
            const capituloSelecionadoEl = document.getElementById('capitulo-selecionado');
            const seletorCapitulosEl = document.getElementById('seletor-capitulos');
            const versiculosContainerEl = document.getElementById('versiculos-container');

            if (!abbrev) {
                loadingEl.innerHTML = '<p>Nenhum livro selecionado. Volte para a <a href="livros.html" class="underline">lista de livros</a>.</p>';
                return;
            }
            
            const baseApiUrl = 'https://bibleapi.co/api';

            function exibirVersiculos(versiculos) {
                versiculosContainerEl.innerHTML = '';
                if (versiculos && Array.isArray(versiculos)) {
                    versiculos.forEach(v => {
                        const p = document.createElement('p');
                        p.innerHTML = `<span class="versiculo-numero">${v.number}</span> ${v.text}`;
                        p.className = "mb-3";
                        versiculosContainerEl.appendChild(p);
                    });
                } else {
                    throw new Error('Formato de dados dos versículos inválido.');
                }
            }

            function carregarCapitulo(capitulo) {
                versiculosContainerEl.innerHTML = '<p>Carregando versículos...</p>';
                capituloSelecionadoEl.textContent = `Capítulo ${capitulo}`;

                // Verifica se temos os dados de Gênesis 1 localmente
                if (abbrev === 'gn' && capitulo == 1) {
                    exibirVersiculos(dadosLocais.gn['1']);
                    return; // Interrompe a função para não buscar na internet
                }

                // Para outros capítulos, busca na internet
                const apiUrl = `${baseApiUrl}/verses/nvi/${abbrev}/${capitulo}`;
                fetch(apiUrl)
                    .then(response => {
                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        return response.json();
                    })
                    .then(data => {
                        exibirVersiculos(data.verses);
                    })
                    .catch(error => {
                        console.error('Erro ao buscar versículos:', error);
                        versiculosContainerEl.innerHTML = '<p class="text-red-600">Não foi possível carregar os versículos. A conexão com a internet pode ter falhado.</p>';
                    });
            }

            const livroData = todosOsLivros.find(livro => livro.abbrev === abbrev);

            if (livroData) {
                nomeLivroEl.textContent = livroData.name;
                
                seletorCapitulosEl.innerHTML = ''; 
                for (let i = 1; i <= livroData.chapters; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = i;
                    seletorCapitulosEl.appendChild(option);
                }

                seletorCapitulosEl.addEventListener('change', (e) => {
                    carregarCapitulo(e.target.value);
                });

                carregarCapitulo(1);

                loadingEl.style.display = 'none';
                conteudoEl.classList.remove('hidden');
            } else {
                console.error('Livro não encontrado na lista local:', abbrev);
                loadingEl.innerHTML = '<p class="text-red-600">Livro não encontrado. Verifique o link e tente novamente.</p>';
            }
        });
    </script>
</body>
</html>
